{% extends "base.html" %}

{% block content %}
<div class="search-box">
    <input type="text" id="search-input" placeholder="Поиск по названиям объектов...">
</div>

<div id="all-data">
    {% for entity in entities %}
    {% include '_entity.html' %}
    {% endfor %}
</div>

<script>
    // Поиск
    document.getElementById('search-input').addEventListener('input', function () {
        const query = this.value.trim();
        if (query.length > 0) {
            fetch(`/search?q=${encodeURIComponent(query)}`)
                .then(res => res.json())
                .then(data => {
                    updatePageWithFilteredData(data);
                });
        } else {
            location.reload();
        }
    });
</script>
{% endblock %}